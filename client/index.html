
<!-- lobbyservice at 2000-->
<html>
<head>
    <title>Main Page</title>
</head>
<body>
	<h1>Main Page</h1>

    <input type="text" id="roomId" value="Room123" placeholder="Enter Room ID"/>
    <input type="text" id="accessToken" value="this_is_the_access_token"/>
    <button id="createRoom">Create Room</button>
    <button id="JoinRoom">Join Room</button>

    <script>
        const roomIdInput = document.getElementById('roomId');
        const accessTokenInput = document.getElementById('accessToken');
        const createRoomButton = document.getElementById('createRoom');
        const joinRoomButton = document.getElementById('JoinRoom');
        
        createRoomButton.addEventListener('click', function() {
            const data = {
                accessToken: accessTokenInput.value,
                gameId: roomIdInput.value,
            };

            fetch('http://localhost:2000/games', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data),
            })
            .then(response => response.json())
            .then(data => {
                console.log('Success:', data);
                let newUrl = window.location.href.replace('index.html', 'room.html?roomId=' + data.gameId); // very hacky
                window.location.href = newUrl
            })
            .catch((error) => {
                console.error('Error:', error);
            });
        });

        joinRoomButton.addEventListener('click', function() {
            const roomId = roomIdInput.value;
            const accessToken = accessTokenInput.value;

            fetch(`http://localhost:2000/games/${roomId}/join`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ accessToken: accessToken }),
            })
            .then(response => response.json())
            .then(data => {
                console.log('Success:', data);
                let newUrl = window.location.href.replace('index.html', 'room.html?roomId=' + data.gameId); // very hacky
                window.location.href = newUrl
            })
            .catch((error) => {
                console.error('Error:', error);
            });
        });
    </script>
</body>
</html>
